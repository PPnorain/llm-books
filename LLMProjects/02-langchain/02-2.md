## LangChain模块解读
LangChain 分为 6 个模块，分别是对（大语言）模型输入输出的管理、外部数据接入、链的概念、（上下文记忆）存储管理、智能代理以及回调系统，通过文档的组织结构，你可以清晰了解到 LangChain的侧重点，在大语言模型开发生态中对自己的定位。下面我将对各个模型逐个进行解读。

### [Model I/O](https://python.langchain.com/docs/modules/model_io/)
这部分包括对大语言模型输入输出的管理，输入环节的提示词管理（包含模板化提示词和提示词动态选择等），处理环节的语言模型（包括所有LLMs的通用接口，以及常用的LLMs工具；Chat模型是一种与LLMs不同的API，用来处理消息），输出环节包括从模型输出中提取信息。

![](https://python.langchain.com/assets/images/model_io-1f23a36233d7731e93576d6885da2750.jpg)

#### 提示词管理
- **提示模板**
动态提示词=提示模板+变量，通过引入给提示词引入变量的方式，一方面保证了灵活性，一方面又能保证Prompt内容结构达到最佳

    ```python
    from langchain import PromptTemplate
    no_input_prompt = PromptTemplate(input_variables=[], template="Tell me a joke.")
    no_input_prompt.format()

    one_input_prompt = PromptTemplate(input_variables=["adjective"], template="Tell me a {adjective} joke.")
    # "Tell me a funny chickens."
    one_input_prompt.format(adjective="funny")

    multiple_input_prompt = PromptTemplate(
        input_variables=["adjective", "content"], 
        template="Tell me a {adjective} joke about {content}."
    )
    # "Tell me a funny joke about chickens."
    multiple_input_prompt.format(adjective="funny", content="chickens")
    ```

- **聊天提示模板**
聊天场景中，消息可以与AI、人类或系统角色相关联，模型应该更加密切地遵循系统聊天消息的指示。这个是对 OpenAI gpt-3.5-tubor API中role字段（role 的属性用于显式定义角色，其中 system 用于系统预设，比如”你是一个翻译家“，“你是一个写作助手”，user 表示用户的输入， assistant 表示模型的输出）的一种抽象，以便应用于其他大语言模型。SystemMessage对应系统预设，HumanMessage用户输入，AIMessage表示模型输出，使用 ChatMessagePromptTemplate 可以使用任意角色接收聊天消息。

    ```python
    from langchain.prompts import (
        ChatPromptTemplate,
        PromptTemplate,
        SystemMessagePromptTemplate,
        AIMessagePromptTemplate,
        HumanMessagePromptTemplate,
    )
    from langchain.schema import (
        AIMessage,
        HumanMessage,
        SystemMessage
    )

    def generate_template():
        template="You are a helpful assistant that translates {input_language} to {output_language}."
        system_message_prompt = SystemMessagePromptTemplate.from_template(template)
        human_template="{text}"
        human_message_prompt = HumanMessagePromptTemplate.from_template(human_template)
        
        chat_prompt = ChatPromptTemplate.from_messages([system_message_prompt, human_message_prompt])
        # [SystemMessage(content='You are a helpful assistant that translates English to Chinese.', additional_kwargs={}), HumanMessage(content='I like Large Language Model', additional_kwargs={}, example=False)]
        final_message = chat_prompt.format_prompt(input_language="English", output_language="Chinese", text="I like Large Language Model").to_messages()
        print(final_message)

    if __name__ == "__main__":
        generate_template()
    ```

- **其他**
  - 基于 StringPromptTemplate 自定义提示模板StringPromptTemplate
  - 将Prompt输入与特征存储关联起来(FeaturePromptTemplate)
  - 少样本提示模板（FewShotPromptTemplate）

### [Data Connection](https://python.langchain.com/docs/modules/data_connection/)
打通外部数据的管道，包含文档加载，文档转换，文本嵌入模型管理，对嵌入后矢量的管理。

### [Chains](https://python.langchain.com/docs/modules/chains/)

### [Memory](https://python.langchain.com/docs/modules/memory/)

### [Agents](https://python.langchain.com/docs/modules/agents/)
Agents涉及到一个LLM在选择要执行的动作、执行该动作、看到观察结果，并重复这个过程直到完成。LangChain提供了代理的标准接口，可供选择的代理，以及端到端代理的示例。
语言模型在与其他知识或计算源交互时往往更强大。这可以包括Python REPLs、嵌入、搜索引擎等。LangChain提供了一大批常用的工具。

[AutoGPT、BabyAGI、CAMEL与Generative Agents的区别与联系](https://liduos.com/learn-llm-agent.html)

### [Callbacks](https://python.langchain.com/docs/modules/callbacks/)


### 资源推荐
2. [Guidance](https://github.com/microsoft/guidance)：微软开源 prompt 编程框架
1. [LangGPT](https://github.com/yzfly/LangGPT)：一种面向大模型的 prompt 编程语言


